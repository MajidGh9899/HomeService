

# سیستم ارائه‌دهنده خدمات منزل 🏠

این پروژه یک پلتفرم جامع برای مدیریت و ارائه خدمات منزل است که با هدف تسهیل ارتباط بین مشتریان و متخصصان، ارائه خدمات به‌صورت شفاف، امن و کارآمد طراحی و پیاده‌سازی شده است. پروژه با استفاده از **Spring Boot** و معماری چندلایه‌ای (**Entity**، **Repository**، **Service**، **Controller**) توسعه یافته و در فازهای مختلف تکمیل شده است.

---

## 🎭 نقش‌ها در سیستم

سیستم شامل سه نقش اصلی است:
- **مدیر (Admin):** مسئول مدیریت خدمات، متخصصان و نظارت بر عملکرد سیستم.
- **متخصص (Specialist):** ارائه‌دهنده خدمات منزل که پیشنهادات خود را برای سفارشات ثبت می‌کند.
- **مشتری (Customer):** کاربر دریافت‌کننده خدمات که سفارشات را ثبت کرده و متخصص را انتخاب می‌کند.

---

## ⚙️ امکانات پروژه بر اساس نقش‌ها

### 👨‍💼 مدیر
- **مدیریت خدمات (CRUD):**  
  ایجاد، ویرایش، مشاهده و حذف خدمات و زیرخدمات (نام غیرتکراری در سطح خدمت والد، قیمت پایه، توضیحات، خدمت والد).  
- **تأیید ثبت‌نام متخصصان:** بررسی و تأیید حساب‌های کاربری متخصصان برای فعال‌سازی دسترسی‌ها.  
- **مدیریت تخصیص متخصصان:** افزودن یا حذف متخصصان به/از زیرخدمات.  
- **جستجو و فیلتر کاربران:** جستجوی کاربران با فیلترهای اختیاری (نقش، نام و نام خانوادگی، خدمات متخصص، بازه امتیاز).  
- **تاریخچه خدمات انجام‌شده:** مشاهده تاریخچه سفارشات هر کاربر (متخصص/مشتری) با جزئیات کامل و امکان فیلتر بر اساس بازه زمانی، وضعیت سفارش و نوع خدمت. نتایج به‌صورت خلاصه نمایش داده شده و جزئیات هر سفارش به‌صورت جداگانه قابل دسترسی است.

### 👨‍🔧 متخصص
- **ثبت‌نام و تأیید ایمیل:**  
  ثبت‌نام با اطلاعات (نام، ایمیل، رمز عبور، عکس پروفایل اختیاری) و تأیید ایمیل از طریق لینک یک‌بارمصرف. وضعیت حساب: «جدید» (بدون عکس)، «در انتظار تأیید» (پس از آپلود عکس و تأیید ایمیل)، «تأییدشده» (پس از تأیید مدیر).  
- **ورود:** ورود با ایمیل و رمز عبور.  
- **تغییر اطلاعات کاربری:** ویرایش اطلاعات (به جز نام) با تغییر وضعیت به «در انتظار تأیید» (در صورت نداشتن کار فعال).  
- **ثبت پیشنهاد:** ثبت پیشنهاد (قیمت، زمان شروع، مدت زمان) برای سفارشات با وضعیت «منتظر پیشنهاد متخصصان» یا «منتظر انتخاب متخصص».  
- **مشاهده تاریخچه سفارشات:** مشاهده سفارشات پیشنهادی با جزئیات (در صورت داشتن مجوز).  
- **مشاهده امتیاز:** مشاهده میانگین امتیازات و امتیاز هر سفارش (بدون دسترسی به متن نظر). تأخیر در اتمام کار منجر به کسر ۱ امتیاز به ازای هر ساعت می‌شود و امتیاز منفی کلی حساب را غیرفعال می‌کند.  
- **مشاهده کیف پول:** مشاهده موجودی و تاریخچه تراکنش‌ها (۷۰٪ مبلغ سفارشات).  

### 👨‍👩‍👧 مشتری
- **ثبت‌نام و تأیید ایمیل:**  
  ثبت‌نام با اطلاعات (نام، ایمیل، رمز عبور) و تأیید ایمیل از طریق لینک یک‌بارمصرف. فعالیت در سیستم پس از تأیید ایمیل امکان‌پذیر است.  
- **ورود:** ورود با ایمیل و رمز عبور.  
- **تغییر اطلاعات کاربری:** ویرایش اطلاعات کاربری.  
- **مشاهده خدمات و زیرخدمات:** مشاهده لیست خدمات موجود.  
- **ثبت سفارش:** ثبت سفارش (توضیحات، قیمت پیشنهادی، زمان شروع، آدرس) با وضعیت اولیه «منتظر پیشنهاد متخصصان».  
- **مشاهده پیشنهادها:** مشاهده پیشنهادهای سفارش با امکان مرتب‌سازی بر اساس قیمت یا امتیاز متخصص.  
- **انتخاب متخصص:** انتخاب پیشنهاد و تغییر وضعیت به «منتظر آمدن متخصص».  
- **مدیریت وضعیت سفارش:** تغییر وضعیت به «شروع‌شده» (پس از زمان پیشنهادی) و «انجام‌شده» پس از اتمام کار.  
- **پرداخت هزینه:** پرداخت از کیف پول پس از اتمام کار. در صورت کمبود اعتبار، شارژ از طریق درگاه پرداخت با صفحه طراحی‌شده (**HTML**، **CSS**، **JavaScript** شامل تایمر ۱۰ دقیقه‌ای، فیلدهای کارت و کپچا).  
- **نظردهی:** ثبت امتیاز (۱ تا ۵) و نظر متنی (اختیاری).  
- **مشاهده تاریخچه سفارشات و کیف پول:** مشاهده سفارشات با فیلتر وضعیت و موجودی کیف پول.

---

## 🛠️ تکنولوژی‌ها و ابزارها
- **Java** و **Spring Boot**  
- **Spring Data JPA** (برای ارتباط با پایگاه داده)  
- **Spring Security** (برای کنترل دسترسی بر اساس نقش‌ها: ADMIN، SPECIALIST، CUSTOMER)  
- **RESTful API** (پاسخ‌ها در قالب JSON)  
- **DTO**، **Input Validation**، **Clean Code**  
- **JUnit** (برای Unit Testing متدهای Service)  
- **Postman/Insomnia** (برای مستندسازی و تست APIها)  
- **Git** (برای کنترل نسخه)  
- **HTML**، **CSS**، **JavaScript** (برای صفحه پرداخت شبیه‌سازی‌شده)

---

## 🏗️ معماری پروژه
پروژه با معماری چندلایه‌ای پیاده‌سازی شده است:
- **Entity Layer:** تعریف موجودیت‌ها و مدل‌های داده.  
- **Repository Layer:** مدیریت ارتباط با پایگاه داده با **Spring Data JPA**.  
- **Service Layer:** منطق تجاری و پردازش داده‌ها با Unit Test.  
- **Controller Layer:** مدیریت APIهای RESTful با **Spring Security** برای کنترل دسترسی.

---

## 🚀 فازهای توسعه پروژه
### 🔹 فاز ۱
- طراحی اولیه با **Spring Framework** و **Hibernate (JPA)**.  
- پیاده‌سازی ثبت‌نام، ورود، مدیریت خدمات، ثبت سفارش و پیشنهاد.

### 🔹 فاز ۲
- مهاجرت به **Spring Boot**.  
- پیاده‌سازی کامل **RESTful API**ها.  
- مدیریت پیشنهادها، انتخاب متخصص و تغییر وضعیت سفارش‌ها.

### 🔹 فاز ۳
- مهاجرت **Repository** به **Spring Data JPA**.  
- اضافه شدن جستجو و فیلتر، تاریخچه سفارشات، مدیریت کیف پول و درگاه پرداخت شبیه‌سازی‌شده.

### 🔹 فاز ۴
- اضافه شدن **Spring Security** برای کنترل دسترسی.  
- اعتبارسنجی ایمیل کاربران.  
- مشاهده تاریخچه خدمات (مدیر) و سفارشات (مشتری).  
- مدیریت خطاها و پاسخ‌های استاندارد JSON.

---

## ✅ نکات مهم پیاده‌سازی
- رعایت اصول **Clean Code**، **Performance** و **Input Validation**.  
- استفاده از **DTO** برای انتقال داده‌ها.  
- پیاده‌سازی **Unit Test** برای تمامی متدهای عمومی لایه **Service**.  
- مستندسازی و تست APIها در **Postman** یا **Insomnia**.  
- مدیریت خطاها با الگوی استاندارد و پاسخ‌های **JSON**.  
- استفاده بهینه از **Git** برای کنترل نسخه.  
- طراحی صفحه پرداخت با **HTML**، **CSS** و **JavaScript** با تایمر و کپچا.

---

## 📌 چشم‌انداز پروژه
این پروژه به‌صورت فازبندی‌شده توسعه می‌یابد و در هر فاز قابلیت‌های جدیدی به آن افزوده خواهد شد. هدف، ارائه یک پلتفرم امن، کاربرپسند و کارآمد برای مدیریت خدمات منزل است.

---


